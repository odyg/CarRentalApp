@model IEnumerable<CarRentalApp.Models.ReservationModel>

@{
    // var genre = Request.Form["genre"];
    // var url = $"/Book/Genre/{genre}";
    ViewData["Title"] = "Reports";
}

<div class="container">
   
    <h2>@ViewData["Title"]</h2>
    <h4>Enter Parameters:</h4>


    <form method="get" class="mb-2">
        <div class="row">
            <div class="col-md-2 form-group">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate" name="startDate" class="form-control" />
            </div>
            <div class="col-md-2 form-group">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate" name="endDate" class="form-control" />
            </div>
            <div class="col-md-2 form-group">
                <label for="carId">Car id:</label>
                <input type="number" id="carId" name="carId" class="form-control" />
            </div>
            <div class="col-md-2 form-group">
                <label for="renterId">Renter id:</label>
                <input type="number" id="renterId" name="renterId" class="form-control" />
            </div>
            <div class="col-md-2 form-group">
                <button type="submit" class="btn btn-primary mt-4">Filter</button>
            </div>
        </div>
    </form>


@{
    var totalAmount = Model.Sum(r => r.TotalAmount);
    var totalCount = Model.Count();
}

<div>
    <strong>Total Reservations:</strong> @totalCount
</div>
<div>
    <strong>Total Amount:</strong> @totalAmount.ToString("C")
</div>


<table class="table">
    <thead>
        <tr>
            <th>ReservationId</th>
            <th>CarId</th>
            <th>RenterId</th>
            <th>BorrowDate</th>
            <th>ReturnDate</th>
            <th>ReserveDate</th>
            <th>Status</th>
            <th>TaxRate (%)</th>
            <th>TotalAmount</th>
            
        </tr>
    </thead>
    <tbody>
        @foreach (var reservation in Model)
        {
            <tr>
                <td>@reservation.ReservationId</td>
                <td>@reservation.CarId</td>
                <td>@reservation.RenterId</td>
                <td>@reservation.BorrowDate.ToShortDateString()</td>
                <td>@reservation.ReturnDate?.ToShortDateString()</td>
                <td>@reservation.ReserveDate.ToShortDateString()</td>
                <td>@reservation.Status</td>
                <td>@reservation.TaxRate</td>
                <td>@reservation.TotalAmount</td>
            </tr>
        }

    </tbody>
</table>
</div>

